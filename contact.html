<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contact | Shabdarth Portfolio</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <header>
    <nav>
      <span class="logo">Shabdarth</span>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="contact.html" class="active">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- Background Particles Canvas -->
  <canvas id="contactCanvas"></canvas>

  <!-- Contact Section -->
  <section id="contact">
    <h2>Contact Me</h2>
    <p>Have a project or idea in mind? Let's connect!</p>
    
    <form id="contactForm">
      <input type="text" name="name" placeholder="Your Name" required>
      <input type="email" name="email" placeholder="Your Email" required>
      <textarea name="message" placeholder="Message" required></textarea>
      <button type="submit">Send</button>
    </form>

    <!-- Success / Error message -->
    <p id="formMessage" style="display:none; text-align:center; margin-top:15px; font-weight:bold;"></p>
  </section>

  <footer>
    <p>&copy; 2025 Shabdarth. All rights reserved.</p>
  </footer>

  <script src="js/script.js"></script>

  <script>
    // Contact page particles (same as before)
    (() => {
      const canvas = document.getElementById('contactCanvas');
      const ctx = canvas.getContext('2d');
      let particles = [];

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        initParticles();
      });

      class Particle {
        constructor(x, y, dx, dy, size, type){
          this.x = x; this.y = y; this.dx = dx; this.dy = dy; this.size = size; this.type = type;
        }
        draw(){
          if(this.type==="cyber"){
            ctx.beginPath();
            ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
            ctx.fillStyle='rgba(67,189,220,0.8)';
            ctx.fill();
          } else if(this.type==="data"){
            ctx.fillStyle='rgba(255,193,7,0.7)';
            ctx.fillRect(this.x,this.y,this.size,this.size*2);
          }
        }
        update(){
          if(this.x+this.size>canvas.width||this.x-this.size<0) this.dx=-this.dx;
          if(this.y+this.size>canvas.height||this.y-this.size<0) this.dy=-this.dy;
          this.x+=this.dx; this.y+=this.dy;

          if(this.type==="cyber"){
            for(let i=0;i<particles.length;i++){
              if(particles[i].type==="cyber" && particles[i]!==this){
                let dist=Math.hypot(this.x-particles[i].x,this.y-particles[i].y);
                if(dist<150){
                  ctx.beginPath();
                  ctx.strokeStyle=`rgba(67,189,220,${1-dist/150})`;
                  ctx.lineWidth=1;
                  ctx.moveTo(this.x,this.y);
                  ctx.lineTo(particles[i].x,particles[i].y);
                  ctx.stroke();
                }
              }
            }
          }
          this.draw();
        }
      }

      function initParticles(){
        particles=[];
        const numParticles=Math.floor(canvas.width/30);
        for(let i=0;i<numParticles;i++){
          let size=Math.random()*3+2;
          let x=Math.random()*canvas.width;
          let y=Math.random()*canvas.height;
          let dx=(Math.random()-0.5)*1.5;
          let dy=(Math.random()-0.5)*1.5;
          let type=Math.random()>0.5?"cyber":"data";
          particles.push(new Particle(x,y,dx,dy,size,type));
        }
      }
      initParticles();

      function animate(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>p.update());
        requestAnimationFrame(animate);
      }
      animate();
    })();

    // Formspree JS integration
    const form = document.getElementById('contactForm');
    const formMessage = document.getElementById('formMessage');

    form.addEventListener('submit', async function(e){
      e.preventDefault();

      const formData = new FormData(form);
      const endpoint = "https://formspree.io/f/mqaybpjk";

      try {
        const response = await fetch(endpoint, {
          method: "POST",
          body: formData,
          headers: { "Accept": "application/json" }
        });

        if(response.ok){
          formMessage.style.display = 'block';
          formMessage.style.color = '#43bddc';
          formMessage.textContent = "Thank you! Your message has been sent successfully.";
          form.reset();
        } else {
          formMessage.style.display = 'block';
          formMessage.style.color = '#ff6b6b';
          formMessage.textContent = "Oops! Something went wrong. Please try again.";
        }
      } catch (error) {
        formMessage.style.display = 'block';
        formMessage.style.color = '#ff6b6b';
        formMessage.textContent = "Network error. Please check your connection.";
      }

      // Hide message after 5 seconds
      setTimeout(()=>{ formMessage.style.display='none'; },5000);
    });
  </script>
</body>
</html>
